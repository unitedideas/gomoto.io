<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17-beta.0/vue.js"></script>
<script src="//cdn.jsdelivr.net/npm/sortablejs@1.7.0/Sortable.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.15.0/vuedraggable.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

<div id="main">
  <button class="btn btn-success" @click="insertItem">Insert Item</button>
  <ul class="list-group drag">
    <draggable :list="items" class="dragArea"
               :options="{handle:'.handle'}">
      <li class="list-group-item"
          v-for="item, index in items"
          :key="item.no">
        <span class="handle" >
          <i class="glyphicon glyphicon-menu-hamburger"></i>
        </span>
        <label>
          {{item.name}}-(No.{{item.no}}) <button class="btn btn-danger" @click="deleteItem">Remove</button>
        </label>
      </li>
    </draggable>
  </ul>
</div>

<script>

var vm = new Vue({
  el: "#main",
  data: {
    items:[
      {no:1, name:'cabbage', categoryNo:'1'},
      {no:2, name:'steak', categoryNo:'2'},
      {no:3, name:'Apple', categoryNo:'3'},
      {no:4, name:'refrigerator', categoryNo:'4'},
      {no:5, name:'Cucumber', categoryNo:'1'},
      {no:6, name:'hamburger', categoryNo:'2'},
      {no:7, name:'banana', categoryNo:'3'},
      {no:8, name:'PS4', categoryNo:'4'},
      ],
  },
  methods:{
    onEnd: function(evt){
    },
    checkMove: function(evt,originalEvent){
      console.log('draggedContext', evt.draggedContext);
      console.log('relatedContext', evt.relatedContext);
      // I can not drag with an apple
      return (evt.draggedContext.element.name!=='Apple');
    },
    insertItem: function(){
      var self = this;
      var newNo = 1;

      if(self.items.concat().length > 0)
        newNo =  Math.max.apply(null, self.items.concat().map(function(item){return item.no;})) +1;

      this.items.push(
        {
          no:ã€€newNo,
          name:'banana'+newNo,
          categoryNo:'3'
        }
        );
      self.count =  self.count+1;
    },
    deleteItem: function(item, index){
      this.items.splice(index, 1);
    },
  }
});



</script>